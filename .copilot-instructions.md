# GitHub Copilot Custom Instructions - POS Frontend

## Project Overview
Modern Point of Sale (POS) system built with React + TypeScript + Vite, featuring comprehensive sales management, inventory control, and transaction processing.

## Architecture & Tech Stack

### Core Technologies
- **Framework**: React 18+ with TypeScript
- **Build Tool**: Vite 7.x
- **Styling**: Tailwind CSS v3 with custom design system
- **State Management**: Zustand with persistence
- **Routing**: React Router v7
- **Icons**: React Icons (Feather Icons)
- **Forms**: Custom form components with validation

### Project Structure
```
src/
├── components/
│   ├── ui/           # Reusable UI components (Button, Input, Card, Modal)
│   ├── layout/       # Layout components (Header, Navigation, Layout)
│   └── PaymentModal.tsx  # Payment processing modal
├── pages/            # Main application pages
├── stores/           # Zustand state management
├── types/            # TypeScript type definitions
├── utils/            # Utility functions
└── hooks/            # Custom React hooks
```

## Coding Standards & Patterns

### Component Architecture
- **Functional Components**: Always use React.FC with TypeScript
- **Props Interface**: Define interfaces for all component props
- **State Management**: Use Zustand stores for global state, useState for local state
- **Styling**: Tailwind CSS classes with responsive design patterns

### Example Component Pattern:
```typescript
import React, { useState } from 'react';
import { FiIcon } from 'react-icons/fi';
import { useStore } from '@/stores';
import { Button, Card } from '@/components/ui';
import { formatCurrency } from '@/utils';
import type { ComponentProps } from '@/types';

interface ComponentNameProps {
  prop1: string;
  prop2?: number;
  onAction?: (data: SomeType) => void;
}

export const ComponentName: React.FC<ComponentNameProps> = ({
  prop1,
  prop2 = 0,
  onAction
}) => {
  const [localState, setLocalState] = useState('');
  const { globalState, actions } = useStore();

  const handleAction = () => {
    // Business logic
    onAction?.(data);
  };

  return (
    <Card className="p-6">
      <div className="space-y-4">
        {/* Component content */}
      </div>
    </Card>
  );
};
```

### State Management with Zustand
```typescript
import { create } from 'zustand';
import { persist } from 'zustand/middleware';
import type { StateType } from '@/types';

interface StoreState {
  data: DataType[];
  loading: boolean;
  actions: {
    addItem: (item: DataType) => void;
    removeItem: (id: string) => void;
    updateItem: (id: string, updates: Partial<DataType>) => void;
  };
}

export const useStore = create<StoreState>()(
  persist(
    (set, get) => ({
      data: [],
      loading: false,
      actions: {
        addItem: (item) => set(state => ({
          data: [...state.data, item]
        })),
        removeItem: (id) => set(state => ({
          data: state.data.filter(item => item.id !== id)
        })),
        updateItem: (id, updates) => set(state => ({
          data: state.data.map(item => 
            item.id === id ? { ...item, ...updates } : item
          )
        }))
      }
    }),
    { name: 'store-name' }
  )
);
```

## Design System & Styling

### Color Palette
- **Primary**: Blue theme with variants (50-950)
- **Success**: Green theme for positive actions
- **Warning**: Yellow/Orange for alerts
- **Danger**: Red theme for destructive actions
- **Gray**: Neutral colors for backgrounds and text

### Component Styling Patterns
```css
/* Card Component */
.card {
  @apply bg-white rounded-lg shadow-sm border border-gray-200 dark:bg-gray-800 dark:border-gray-700;
}

/* Button Variants */
.btn-primary {
  @apply bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500;
}

/* Input Components */
.input {
  @apply w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-gray-900 focus:ring-2 focus:ring-primary-500 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-100;
}
```

### Responsive Design
- **Mobile First**: Start with mobile design, scale up
- **Breakpoints**: sm (640px), md (768px), lg (1024px), xl (1280px)
- **Grid System**: Use CSS Grid and Flexbox
- **Touch Targets**: Minimum 44px for mobile interactions

## Business Logic Patterns

### POS-Specific Patterns
```typescript
// Product Management
const handleAddToCart = (product: Product) => {
  const { addItem } = useCartStore();
  addItem(product);
};

// Price Calculations
const calculateTotal = (subtotal: number, taxRate: number) => {
  const tax = Math.round((subtotal * taxRate) * 100) / 100;
  return subtotal + tax;
};

// Transaction Processing
const processPayment = async (paymentData: PaymentData) => {
  const { addTransaction } = useTransactionStore();
  const transaction = {
    ...paymentData,
    id: generateId(),
    timestamp: new Date(),
    receiptNumber: generateReceiptNumber()
  };
  addTransaction(transaction);
};
```

### Form Handling
```typescript
const [formData, setFormData] = useState<FormType>({});
const [errors, setErrors] = useState<Record<string, string>>({});

const handleInputChange = (field: keyof FormType, value: string) => {
  setFormData(prev => ({ ...prev, [field]: value }));
  if (errors[field]) {
    setErrors(prev => ({ ...prev, [field]: '' }));
  }
};

const validateForm = (): boolean => {
  const newErrors: Record<string, string> = {};
  // Validation logic
  setErrors(newErrors);
  return Object.keys(newErrors).length === 0;
};
```

## Code Generation Guidelines

### When Creating New Components:
1. **Check existing patterns** in similar components
2. **Use consistent naming** (PascalCase for components, camelCase for functions)
3. **Include proper TypeScript types** for all props and state
4. **Add responsive design** considerations
5. **Include accessibility** attributes (ARIA labels, keyboard navigation)
6. **Handle loading and error states** appropriately

### When Modifying Existing Code:
1. **Preserve existing patterns** and conventions
2. **Maintain type safety** throughout changes
3. **Update related components** if interfaces change
4. **Test edge cases** and error scenarios
5. **Keep performance optimizations** (React.memo, useCallback, useMemo)

### File Organization:
- **Index files**: Export components from directories
- **Type definitions**: Keep in dedicated types/ directory or co-located
- **Utils**: Group related utility functions
- **Constants**: Define in appropriate scope (component, store, or global)

## POS Domain Knowledge

### Key Entities:
- **Product**: Inventory items with price, stock, category
- **Cart**: Temporary collection of items for purchase
- **Transaction**: Completed sale with payment details
- **User**: Cashier or admin with role-based permissions
- **Settings**: Store configuration (tax rates, currency, etc.)

### Business Rules:
- Stock levels must be positive
- Tax calculations must be precise (2 decimal places)
- Receipt numbers must be unique
- Payment amounts must match or exceed total
- Change calculation for cash payments

### UI/UX Principles:
- **Speed**: Minimize clicks for common actions
- **Clarity**: Clear visual hierarchy and information
- **Error Prevention**: Validate inputs in real-time
- **Accessibility**: Keyboard navigation and screen reader support
- **Mobile Optimization**: Touch-friendly interface

## Performance Considerations

### Optimization Patterns:
```typescript
// Memoize expensive calculations
const expensiveValue = useMemo(() => {
  return heavyCalculation(data);
}, [data]);

// Memoize event handlers
const handleClick = useCallback((id: string) => {
  handleAction(id);
}, [handleAction]);

// Memoize components
export const ExpensiveComponent = React.memo(Component);
```

### Data Loading:
- Use loading states for async operations
- Implement optimistic updates where appropriate
- Cache frequently accessed data
- Debounce search inputs

## Error Handling

### Error Boundaries:
```typescript
const ErrorFallback = ({ error }: { error: Error }) => (
  <div className="text-center py-12">
    <h2 className="text-xl font-semibold text-gray-900 dark:text-gray-100">
      Something went wrong
    </h2>
    <p className="text-gray-600 dark:text-gray-400">{error.message}</p>
  </div>
);
```

### Form Validation:
- Client-side validation for UX
- Server-side validation for security
- Clear, helpful error messages
- Field-level and form-level validation

## Testing Patterns

### Unit Tests:
- Test utility functions
- Test component behavior
- Test state management logic
- Mock external dependencies

### Integration Tests:
- Test user workflows
- Test API interactions
- Test state persistence
- Test routing and navigation

## Development Workflow

### Git Conventions:
- **feat**: New feature
- **fix**: Bug fix
- **refactor**: Code refactoring
- **style**: UI/styling changes
- **docs**: Documentation updates

### Code Review Checklist:
- TypeScript types are complete
- Responsive design is implemented
- Accessibility is considered
- Performance is optimized
- Error handling is robust

## AI Assistant Guidelines

### When assisting with this codebase:
1. **Follow established patterns** and conventions consistently
2. **Maintain type safety** and add proper TypeScript annotations
3. **Consider mobile responsiveness** in all UI changes
4. **Include proper error handling** and loading states
5. **Use existing utility functions** before creating new ones
6. **Respect the component hierarchy** and data flow
7. **Optimize for POS use cases** (speed, efficiency, clarity)
8. **Test suggestions** against business requirements
9. **Provide complete, working code** examples
10. **Explain architectural decisions** when making significant changes

Remember: This is a production POS system where speed, reliability, and user experience are critical. Every code change should enhance these qualities while maintaining clean, maintainable architecture.